/*! For license information please see MCPBridge.js.LICENSE.txt */
!function(e,a){"object"==typeof exports&&"object"==typeof module?module.exports=a():"function"==typeof define&&define.amd?define([],a):"object"==typeof exports?exports.MCPBridge=a():e.MCPBridge=a()}(self,(function(){return(()=>{"use strict";var __webpack_modules__={"./mcp-h5-bridge/Bridge.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass Bridge {\n  static call(params = {}) {\n    const sParams = JSON.stringify(params);\n    console.error(params);\n    if (window.AndroidBridge) {\n      window.AndroidBridge.ArleneWebViewDidCallFromJS(sParams);\n    } else if (window.webkit && window.webkit.messageHandlers && window.webkit.messageHandlers.bridge) {\n      window.webkit.messageHandlers.bridge.postMessage(sParams);\n    } else {\n      console.error('Bridge: Can not support other Platform', params);\n    }\n  }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Bridge);\n\n//# sourceURL=webpack://MCPBridge/./mcp-h5-bridge/Bridge.js?")},"./mcp-h5-bridge/Callback.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Callback)\n/* harmony export */ });\n// import {\n//   Base64,\n// } from 'js-base64';\n// import _ from 'lodash';\n\nwindow.WebBridge = {};\nconst taskCallbackMap = {};\nlet JSBridgeIndex = 0;\n\nclass Callback {\n\n  static on(callbackId, callback, always = false) {\n    taskCallbackMap[callbackId] = {\n      callback: callback,\n      always: always,\n    };\n  }\n\n  static off(callbackId) {\n    delete taskCallbackMap[callbackId];\n  }\n\n  static getCallbackId() {\n    let callbackId = `JSBRIDGE_CALLBACK_0_${JSBridgeIndex++}`;\n    return callbackId;\n  }\n}\n\nwindow.WebBridge.AppCallback = function(rOptions) {\n  // const rOptions = JSON.parse(Base64.decode(options));\n  // const rOptions = options;\n  const callbackId = rOptions.callbackId;\n  const taskObj = taskCallbackMap[callbackId];\n  if(taskObj){\n    let callback = taskObj['callback'];\n    let always = taskObj['always'];\n    callback && callback(rOptions);\n    if (!always) {\n      Callback.off(callbackId);\n    }\n  }\n};\n\n\n//# sourceURL=webpack://MCPBridge/./mcp-h5-bridge/Callback.js?")},"./mcp-h5-bridge/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "WebBridge": () => (/* binding */ WebBridge)\n/* harmony export */ });\n/* harmony import */ var _Bridge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Bridge */ "./mcp-h5-bridge/Bridge.js");\n/* harmony import */ var _Callback__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Callback */ "./mcp-h5-bridge/Callback.js");\n\n\n\nclass WebBridge {\n  static call(task,options={}, callback, always = false) {\n    if(task&&task!==""){\n      options.task = task;\n      const callbackId = _Callback__WEBPACK_IMPORTED_MODULE_1__.default.getCallbackId();\n      if(typeof callback== "function"){\n        options[\'callbackId\'] = callbackId;\n        _Callback__WEBPACK_IMPORTED_MODULE_1__.default.on(callbackId, callback, always);\n      }\n      _Bridge__WEBPACK_IMPORTED_MODULE_0__.default.call(options);\n    }\n  }\n\n\n  static register(callbackId, callback, always = false) {\n    _Callback__WEBPACK_IMPORTED_MODULE_1__.default.on(callbackId,callback, always);\n  }\n\n  static unregister(callbackId) {\n    _Callback__WEBPACK_IMPORTED_MODULE_1__.default.off(callbackId);\n  }\n  // static getInstance() {\n  //   if (!this.instance || !(this.instance instanceof WebBridge)) {\n  //     this.instance = new this();\n  //   }\n  //   return this.instance;\n  // }\n}\n\n\n\n//# sourceURL=webpack://MCPBridge/./mcp-h5-bridge/index.js?')}},__webpack_module_cache__={};function __webpack_require__(e){var a=__webpack_module_cache__[e];if(void 0!==a)return a.exports;var _=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](_,_.exports,__webpack_require__),_.exports}__webpack_require__.d=(e,a)=>{for(var _ in a)__webpack_require__.o(a,_)&&!__webpack_require__.o(e,_)&&Object.defineProperty(e,_,{enumerable:!0,get:a[_]})},__webpack_require__.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./mcp-h5-bridge/index.js");return __webpack_exports__})()}));